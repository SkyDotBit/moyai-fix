(function(c,t,y,n,F,l){"use strict";const{ScrollView:D}=l.General,{FormSwitchRow:R}=l.Forms;function b(){return F.useProxy(t.storage),React.createElement(D,{style:{flex:1}},React.createElement(R,{label:"Play on reactions :O",value:t.storage.allowReactions??!0,onValueChange:function(e){t.storage.allowReactions=e}}),React.createElement(l.Forms.FormInput,{title:"\u{1F5FF} Custom Sound URL",placeholder:"https://github.com/SkyDotBit/moyai-fix/raw/refs/heads/main/thud.mp3",onChangeText:function(e){return t.storage.customUrl=e},style:{marginTop:-25,marginHorizontal:12}}))}const{DCDSoundManager:o}=n.ReactNative.NativeModules,m=y.findByStoreName("SelectedChannelStore");let d="https://github.com/SkyDotBit/moyai-fix/raw/refs/heads/main/thud.mp3";t.storage.customUrl&&(d=t.storage.customUrl);const i=6969;let f=-1;const p=function(){return new Promise(function(e){return o.prepare(d,"notification",i,function(r,a){return e(a)})})};let u=null,s=!1;async function h(){s&&(u!=null&&clearTimeout(u),o.stop(i),s=!1),s=!0,await o.play(i),setTimeout(function(){s=!1,o.stop(i),u=null},f)}function g(e){if(e.message.content&&e.channelId==m.getChannelId()&&!e.message.state&&e.sendMessageOptions==null){let r=(e.message.content.match(/ðŸ—¿/g)??[]).length;if(r+=(e.message.content.match(/<a?:.*?moy?ai.*?:.+?>/gi)??[]).length,r>0)for(let a=0;a<r;a++)setTimeout(h,a*350)}}function S(e){(t.storage.allowReactions??!0)&&e.channelId==m.getChannelId()&&(e.emoji.name=="\u{1F5FF}"||e.emoji.name.match(/.*?moy?ai.*?/i))&&!e.optimistic&&h()}let E=!1;var C={onLoad:function(){E||p().then(function(e){E=!0,f=e.duration}),n.FluxDispatcher.subscribe("MESSAGE_CREATE",g),n.FluxDispatcher.subscribe("MESSAGE_REACTION_ADD",S)},onUnload:function(){n.FluxDispatcher.unsubscribe("MESSAGE_CREATE",g),n.FluxDispatcher.unsubscribe("MESSAGE_REACTION_ADD",S)},settings:b};return c.default=C,Object.defineProperty(c,"__esModule",{value:!0}),c})({},vendetta.plugin,vendetta.metro,vendetta.metro.common,vendetta.storage,vendetta.ui.components);
