(function(i,t,S,a,w,n){"use strict";const{FormText:C}=n.Forms,{ScrollView:u}=n.General,{FormSwitchRow:D}=n.Forms;function b(){return w.useProxy(t.storage),React.createElement(React.Fragment,null,React.createElement(u,{style:{flex:1}},React.createElement(D,{label:"Play on reactions :O",value:t.storage.allowReactions??!0,onValueChange:function(e){t.storage.allowReactions=e}})),React.createElement(u,{style:{flex:1}},React.createElement(n.Forms.FormInput,{title:"\u{1F5FF} Custom Sound URL",placeholder:"https://github.com/SkyDotBit/moyai-fix/raw/refs/heads/main/thud.mp3",onChangeText:function(e){return t.storage.customUrl=e},style:{marginTop:-25,marginHorizontal:12}})),React.createElement(u,{style:{flex:1}},React.createElement(n.Forms.FormInput,{title:"\u{1F5FF} Custom emoji (Won't always work)",placeholder:"\u{1F5FF}",onChangeText:function(e){return t.storage.customEmoji=e},style:{marginTop:-25,marginHorizontal:12}}),React.createElement(C,null,"You will need to restart Discord for changes to take place.")))}const{DCDSoundManager:r}=a.ReactNative.NativeModules,f=S.findByStoreName("SelectedChannelStore");let h="https://github.com/SkyDotBit/moyai-fix/raw/refs/heads/main/thud.mp3";t.storage.customUrl&&(h=t.storage.customUrl);let m="\u{1F5FF}";t.storage.customEmoji&&(m=t.storage.customEmoji);const s=6969;let g=-1;const x=function(){return new Promise(function(e){return r.prepare(h,"notification",s,function(c,o){return e(o)})})};let d=null,l=!1;async function E(){l&&(d!=null&&clearTimeout(d),r.stop(s),l=!1),l=!0,await r.play(s),setTimeout(function(){l=!1,r.stop(s),d=null},g)}function F(e){if(e.message.content&&e.channelId==f.getChannelId()&&!e.message.state&&e.sendMessageOptions==null){let c=(e.message.content.match(m)??[]).length;if(c+=(e.message.content.match(/<a?:.*?moy?ai.*?:.+?>/gi)??[]).length,c>0)for(let o=0;o<c;o++)setTimeout(E,o*350)}}function y(e){(t.storage.allowReactions??!0)&&e.channelId==f.getChannelId()&&(e.emoji.name==m||e.emoji.name.match(/.*?moy?ai.*?/i))&&!e.optimistic&&E()}let R=!1;var T={onLoad:function(){R||x().then(function(e){R=!0,g=e.duration}),a.FluxDispatcher.subscribe("MESSAGE_CREATE",F),a.FluxDispatcher.subscribe("MESSAGE_REACTION_ADD",y)},onUnload:function(){a.FluxDispatcher.unsubscribe("MESSAGE_CREATE",F),a.FluxDispatcher.unsubscribe("MESSAGE_REACTION_ADD",y)},settings:b};return i.default=T,Object.defineProperty(i,"__esModule",{value:!0}),i})({},vendetta.plugin,vendetta.metro,vendetta.metro.common,vendetta.storage,vendetta.ui.components);
