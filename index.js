(function(c,t,R,n,b,i){"use strict";const{ScrollView:v}=i.General,{FormSwitchRow:y}=i.Forms;function p(){return b.useProxy(t.storage),React.createElement(v,{style:{flex:1}},React.createElement(y,{label:"Play on reactions",value:t.storage.allowReactions??!0,onValueChange:function(e){t.storage.allowReactions=e}}),React.createElement(i.Forms.FormInput,{title:"Sound URL (Optional)",placeholder:"https://raw.githubusercontent.com/Metastruct/garrysmod-chatsounds/master/sound/chatsounds/autoadd/memes/overused%20thud.ogg",onChange:function(e){return t.storage.customUrl=e},style:{marginTop:-25,marginHorizontal:12}}))}const{DCDSoundManager:o}=n.ReactNative.NativeModules,d=R.findByStoreName("SelectedChannelStore");let m="https://raw.githubusercontent.com/Metastruct/garrysmod-chatsounds/master/sound/chatsounds/autoadd/memes/overused%20thud.ogg";t.storage.customUrl&&(m=t.storage.customUrl);const s=6969;let g=-1;const D=function(){return new Promise(function(e){return o.prepare(m,"notification",s,function(u,a){return e(a)})})};let l=null,r=!1;async function h(){r&&(l!=null&&clearTimeout(l),o.stop(s),r=!1),r=!0,await o.play(s),setTimeout(function(){r=!1,o.stop(s),l=null},g)}function f(e){if(e.message.content&&e.channelId==d.getChannelId()&&!e.message.state&&e.sendMessageOptions==null){let u=(e.message.content.match(/ðŸ—¿/g)??[]).length;if(u+=(e.message.content.match(/<a?:.*?moy?ai.*?:.+?>/gi)??[]).length,u>0)for(let a=0;a<u;a++)setTimeout(h,a*350)}}function E(e){(t.storage.allowReactions??!0)&&e.channelId==d.getChannelId()&&(e.emoji.name=="\u{1F5FF}"||e.emoji.name.match(/.*?moy?ai.*?/i))&&!e.optimistic&&h()}let S=!1;var F={onLoad:function(){S||D().then(function(e){S=!0,g=e.duration}),n.FluxDispatcher.subscribe("MESSAGE_CREATE",f),n.FluxDispatcher.subscribe("MESSAGE_REACTION_ADD",E)},onUnload:function(){n.FluxDispatcher.unsubscribe("MESSAGE_CREATE",f),n.FluxDispatcher.unsubscribe("MESSAGE_REACTION_ADD",E)},settings:p};return c.default=F,Object.defineProperty(c,"__esModule",{value:!0}),c})({},vendetta.plugin,vendetta.metro,vendetta.metro.common,vendetta.storage,vendetta.ui.components);
